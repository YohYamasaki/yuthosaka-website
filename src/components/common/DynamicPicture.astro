---
import { Picture } from "astro:assets";
import type { LocalImageProps } from "astro:assets";

type Props = {
  src: string;
  alt: string;
};

const { src, alt, ...rest } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/images/**/*.{jpeg,jpg,png,gif}",
);

if (!images[src])
  throw new Error(
    `"${src}" does not exist in glob: "src/assets/**/*.{jpeg,jpg,png,gif}"`,
  );

const image = images[src]();
---

<Picture src={image} formats={["avif", "webp"]} alt={alt} />
